1. osi 7계층
-물리 
 ㄴ 비트 단위이다.
 ㄴ 기계적, 전기적 특성을 이용해서 통신 케이블로 데이터를 전송하는 물리적 계층
-데이터 링크
 ㄴ 프레임 단위이다.
 ㄴ 통신의 흐름을 관리한다. 
 ㄴ token ring, CSMA/CA(avoid 회피), CSMA/CD(detection 탐지), ethernet
-네트워크 (IP가 보인다.)
 ㄴ 패킷 단위이다.
 ㄴ ip, icmp, arp, rip가 있다.
-전송 (tcp,udp가 보인다.)
 ㄴ 세그먼트 단위이다.
 ㄴ tcp, udp가 있으며 메세지의 오류를 제어한다.
 ㄴ 메세지가 클 경우 세그먼트 단위로 나눠 네트워크 계층으로 전달한다.
-세션
 ㄴ 메세지 단위이다.
 ㄴ netBIOS가 있으며 데이터 교환의 경계와 동기화를 제공하는 계층이다.
 ㄴ 세션계층의 프로토콜은 연결이 손실될 경우 연결 복구를 시도한다. 통신 방법에 따라 전이중, 반이중 통신을 한다.
-표현
 ㄴ 메세지 단위이다.
 ㄴ ASCII, MPEG등 데이터의 암호화 복호화가 이 계층에서 일어난다.
-응용
 ㄴ 메세지 단위이다.
 ㄴ dns, http, 등이 있으며 통신의 최종 목적지이다.

2. tcp/ip 4계층
-네트워크
 ㄴ OSI 7계층의 물리계층과 데이터 링크 계층이다.
 ㄴ 물리적인 주소로 MAC을 사용한다.
-인터넷
 ㄴ OSI 7계층의 네트워크 계층에 해당된다.
 ㄴ 통신 노드간의 IP패킷을 전송하는 기능과 라우팅 기능을 담당한다.
 ㄴ ip, arp, rarp
-전송
 ㄴ OSI 7계층의 전송 계층에 해당된다.
 ㄴ 통신 노드 간의 연결을 제어하고 신뢰성 있는 데이터 전송을 담당한다.
 ㄴ TCP, UDP
-응용
 ㄴ OSI 7계층의 세션, 표현, 응용 계층에 해당된다.
 ㄴ FTP, HTTP, SSH등

2.tcp, udp
-tcp 연결 지향, 속도 느리고, 신뢰성 높은 프로토콜
-socket.SOCK_STREAM

-udp 비연결 지향, 속도 빠르고, 신뢰성 낮음(실시간 서비스)
-socket.SOCK_DGRAM

3 lan
-local area network
-lan > wan > man
      (wide) 

4. 포트포워딩, nat
 - ipv4는 255^4개가 있지만 전세계 단말기에게 모두 할당하기에는 부족한 갯수이다. 따라서 한 내부 네트워크 대역에 할당을 하고 내부 네트워크는 임의의 ip를 할당하는 것이 NAT이다.
 - 하지만 내부에서 임의의 ip를 할당받은 단말기가 외부의 단말기에 요청을 보내고 난 후 외부 단말기가 다시 내부의 요청한 단말기에 응답을 해야하는데 이때 사용하는 것이 포트 번호이다. 
 - nat 기능을 한 네트워크 장비가 특정 포트로 통신이 들어오면 특정 단말기에 요청을 전송하는 기능이 있고 외부에서 특정 포트로 요청이 오면 내부의 특정 단말기에 특정 포트로 보내라고 설정한 것이 포트포워딩이다. 

5.vpn
 - virtual private network
 - 이것은 가상의 전용선을 만들기 때문에 안전하다.
 - vpn은 계층별로 분류할 수 있는데 2계층에서 PPTP, L2TP, L2F로 통신하거나 3계층에서 IPSec으로 통신한다.
 - IPSec에서는 인증을 담당하는 AP(Authentication Header)헤더와 암호화를 하는 ESP(encapsulating security payload)가 있으며 전송 모드와 터널모드에서 다르게 작동한다.

6.IPSec
 - 전송모드와 터널모드가 있다.
 - 터널모드 : 네트워크 장비에서 네트워크 장비 사이를 암호화 통신을 하는 것으로 헤더와 데이터를 암호화 한뒤에 AH, ESP를 추가한다. 하지만 네트워크 헤더가 가려지기 때문에 임의의 새로운 ip 헤더를 부여한다.
 - 전송모드 : 단말기와 단말기 사이를 암호화 통신하는 것으로 AH, ESP 둘중 하나를 사용해 암호화 한뒤 전송한다. 터널모드와 다르게 새로운 ip헤더를 부여할 필요가 없다.


7.포트번호 
21 ftp
22 ssh
23 telnet
25 smtp
53 dns
69 tftp
80 http
110 143 pop3
443 smb
445 https
3306 mysql
 
8. IP 헤더
 - ver 4bits
 - header length 4bits
 - service type 8bits
 - total length 16bits
 - ID 16bits
 - flags 3bits
 - fragmentation offset 13bits
 - ttl 8bits
 - protocol 8bits
 - header checksum 16bits

9. TCP 헤더
 - source port 16bits
 - destination port 16bits
 - sequence number 32bits
 - acknowledgement number 32bits
 - header length 4bits
 - reserved 6bits
 - flags 6bits
 - window size 16bits
 - checksum 16bits
 - urgent pointer 16bits

10. UDP 헤더
 - source port 16bits
 - destination port 16bits
 - total length 16bits
 - checksum 16bits

11. IDS
 - 침입탐지시스템(Detection)으로 외부에서 내부의 침입여부를 탐지하는 장비이다.
 - 장점으로는 가격이 저렴하고 여러가지의 필터를 통해 패킷의 관제를 자세히 할 수 있다.
 - 단점으로는 침입을 탐지할뿐 다른 조치는 취하지 않는다.

12. IPS
 - 침입방지시스템(Prevention)으로 외부에서 내부의 침입여부를 탐지하고 차단하는 장비이다.
 - 장점으로는 탐지뿐만 아니라 차단까지 같이 수행한다.
 - 단점으로는 비쌀 뿐만 아니라 웹에 대한 패턴이 미비하다.

13 FW
 - 침입차단시스템(FW)으로 외부에서 내부에 비정상적인 패킷을 차단한다.
 - IPS와의 차이점은 FW는 3계층에서 IP, port를 제어하기 때문에 그 이상의 계층의 공격은 탐지가 힘들다.
 - 기본적으로 화이트리스트 방법을 사용한다.

14. WAF
 - web application fw로 7계층에서 http프로토콜을 사용하는 취약점 공격만 차단함.
 - Dos, DDos차단

15. UTM
 - IPS + FW인 통합 장비로서 통합적인 관리가 가능한 서버이다.
 
16. SIEM
 - 한개의 조직이나 회사에서 보안적 위협을 탐지하거나 분석 및 대응까지 할수 있는 서버이다.