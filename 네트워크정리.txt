네트워크 정리

1. 단말기의 기본 설정
 - ip address
 - gateway
 - subnet
 - dns server

ip주소
 - Internet protocol의 약자로 인터넷 연결에 필요로 하는 주소이다.
 - 내부 ip의 할당은 192.168인 c클래스를 사용한다. 루프백은 127.0.0.1

gateway
 - 내부에서 외부네트워크로 나가는 통로로서 해당 ip에 메세지를 전송하면 외부로 데이터를 내보낸다는 뜻이다.
 - 보통 .1이나 .254로 쓴다.
 - 가정집에 모뎀이나 공유기가 있는데 모뎀이 외부 케이블로 연결되어 유선으로 이더넷 케이블을 연결하게 해주고 공유기가 무선으로 네트워크에 접속할 수 있게 하는 기기이다.

subnet
 - 네트워크를 논리적으로 나누기 위해 사용되며 맨 처음 ip는 네트워크 대역을 대표하는 네트워크 주소로 맨 마지막 ip는 해당 네트워크 대역에 모든 통신을 하는 broadcast 주소로 사용된다.
 - ip주소를 2진수로 표현했을때 총 32개의 칸이 나오고 앞에서부터 1을 채웠을때 나오는 총 갯수를 prefix라고 부른다.
 - cidr표현식은 192.168.1.2/24 이렇게 슬래쉬 뒤에 prefix를 넣는 표현식이다.
 - 1111 1111 . 1111 1111 . 1111 1111 . 1111 1111 (2진수)
 - 255 . 255 . 255 . 255 (10진수)
 - 서브넷을 나눌때 8자리중 맨 앞에서 부터 채워지기 때문에 네트워크 대역을 2개로 나누면 128(2^7), 4개로 나누면 128+64(2^6) 8개로 나누면 128+64+32(2^5)로 표현이 된다.
 - 예시) 255.255.255.128 (./25 이며 네트워크 대역은 2개, 한 네트워크 대역에서 사용 가능한 단말기의 갯수는 64-네트워크-broadcast=62개가 된다.)
 - 255.255.255.192 (./26 이며 네트워크 대역은 4개, 한 네트워크 대역에서 사용 가능한 단말기의 갯수는 32-네트워크-broadcast=30개가 된다.)

DNS서버
 - url창에 도메인을 치면 IP를 알아오기 위한 서버
 - 168.126.63.1, 1.1.1.1, 8.8.8.8이 있다.

---------------------------------------------------------------------------
2.라우팅

라우팅이란
-라우팅은 라우터끼리 물리적 연결 뿐만 아닌 논리적연결도 해야한다는 것을 의미한다.
-정적라우팅 (static)과 동적(rip, ospf등)이 있다.
-동적 라우팅도 거리벡터와 상태 링크로 나뉜다.
*en
 config t
 route rip
 network 1.0.0.0
 network 192.168.0.0

3.라우터 설정

-라우터설정은 gigafastethernet설정과 serial설정, 라우팅이 있다.

*en
 config t
 interface gigafastethernet 0/?
 ip address 192.168.0.?
 no shutdown 
 exit
 wr

*en
 config t
 interface serial 0/?/?
 ip address ?.?.?.? 255.255.255.???
 no shut
 exit
 wr

4.서버설정
-서버는 여러가지있는데 dns, web, mail이 대표적이다.
-도메인 질의는 dns->tcp->http순서
-https://www.server-world.info/

windows 2008 server:
-그냥 클릭만하면 된다. 
-역할추가 클릭 
-중요하게 볼건 dns, iis, activity directory
-dns랑 iis(웹서비스)는 다아는건데 activity directory domain service는
-다수의 컴퓨터를 폴더로 취급하고 다량의 컴퓨터 관리에 용이한 것이고
 세부적인내용(컴퓨터 끄고 키고 , 로그인 시간설정)등을 할수있다.

5.방화벽설정
-방화벽은 router+switch 역할을 하며
 dhcp나 vlan등을 설정해준다.
-dhcp는 ip 자동할당
-vlan은 가상의 근거리망이며 스위치가 구역을 나누는 역할을 한거였다.

방화벽은 RAN
-Routing
-Access-List
-Nat

-routing
 en 
 config t
 interface vlan 2
 ip address 172.16.0.253 255.255.255.0
 no shutdown

-access_list(라우터 정규)
 en
 config t 
 access-list 10 permit 192.168.10.1 0.0.0.255


 access_list(라우터 확장)
 en
 config t
 access-list 100 permit icmp any any
 access-list 100 deny tcp any any
 access-list 100 permit udp any any

 
 access_list(방화벽 정규)
 en
 config t
 access-list outside permit tcp any any range telnet
 access-list outside permit udp any any lt domain


 access_list(방화벽 확장)
 en
 config t
 access-list outside_in extended permit icmp any any
 access-list outside_in extended permit tcp any any
 access-list outside_in extended permit udp any any
 access-list outside_in extended permit ip 192.168.0.1 192.168.252.106
 access-list outside_in extended deny smtp any any


-access-list는 외부망에서 내부망으로 들어오는 패킷을 허락, 불허하는 것을
 구분하는것이다.

예)access-list outside extend permit icmp any any
-outside라는 이름의 외부망을 icmp가 모든 목적지에서 모든 도착지까지 이동을 허락
 하는내용이다.


-nat는 외부망과 내부망을 분리하는것이다.
-ipv4는 고갈위험이 있기 때문에 아무리 내 아이피가 
 192.168이라해도 외부로 나가면 1.102로 바뀌게 된다. 이 작업을 Nat라한다.

-nat
 en
 config t
 object network internal_lan_outside
 subnet 192.168.1.0 255.255.255.0
 nat (inside,outside) dynamic interface
 exit


6 vlan
-vlan은 스위치의 기능으로 virtual 즉 가상의 lan망을 나누는것이다.
-vlan은 같은 네트워크, 같은 스위치, 같은 vlan이여야 통신할 수 있다.
-vlan에서 다른 vlan으로 통신하려면 라우터가 있어야한다.
-이것을 하려면 vlan database설정을 해주어야한다.
-라우터에서 오는 패킷을 받으려면 multi스위치에서 연결된 선에 trunk설정을 해줘야 한다.

-vlan
 en
 config t
 interface vlan2
 ip address dhcp setroute

+라우터 설정
interface fa0/0.10(vlan이름)
encapsulation dot1Q 10


7 dhcp
dhcp는 아이피 자동할당이다.
static 이 아닌 dhcp로 아이피를 받는데, 서버나 라우터가 dhcp설정을 할 수 있다.

-dhcp
 ip dhcp pool Outside
 network 172.16.0.0
 default-router 172.16.0.254
 dns-server 8.8.8.8
 ip dhcp excluded-address 172.16.0.254
         (불포함 아이피 주소)

8. telnet, ssh
-telnet은 라우터, 방화벽, 다른 기기등의 prompt에 연결할수 있는 기능이다.
-ssh는 telnet의 상위버전이다. (한마디로 정보가 교환할때 암호화를 한다는것이다.)
-secure shell

-하지만 둘다 userid와 password만 있으면 연결 가능하기 때문에
 보안에 허점이 생길 수 있다는 것이다.
 (brute force와 같이 모든 수를 대입하면 뚫리기 때문)



